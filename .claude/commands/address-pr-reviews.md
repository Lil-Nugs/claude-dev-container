---
description: Address human review items on an open PR, one by one
allowed-tools: Bash(*), Read(*), Glob(*), Grep(*), Edit(*), Write(*), TodoWrite(*), AskUserQuestion(*)
---

# Address PR Reviews

You are tasked with helping the user address human review items on a PR.

## Current State

- Current branch: !`git branch --show-current`
- Open PRs: !`gh pr list --state open --limit 5`

## Arguments

- `$ARGUMENTS` - Optional PR number. If not provided, will use the first open PR.

## Your Task

### 1. Identify the PR

If a PR number was provided as an argument, use that. Otherwise, use `gh pr list` to find open PRs and select the most recent one.

```bash
# Get PR details including comments
gh pr view <PR_NUMBER> --json title,body,comments,reviews
```

### 2. Extract Human Review Items

Look through the PR comments for:
- "Areas Needing Human Attention"
- "Human reviewers should verify"
- "Flagged for human attention"
- Items explicitly marked for human decision

Create a todo list with each item to address.

### 3. Address Items One by One

For each item:

1. **Understand the Issue**: Read relevant code files to understand what's being questioned
2. **Assess Options**: Determine if this is:
   - An architectural decision (explain tradeoffs, ask user to approve)
   - A mismatch/bug (fix it and show the change)
   - A verification task (verify and report findings)
3. **Get User Input**: Use `AskUserQuestion` to confirm the approach with the user
4. **Implement If Needed**: If a fix is required, make the change
5. **Mark Complete**: Update the todo list

### 4. Commit and Push

After addressing all items:

```bash
# Stage and commit any changes
git add -A
git commit -m "Address human review feedback on PR #<NUMBER>

<list of changes>

Generated with [Claude Code](https://claude.com/claude-code)

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>"

# Push changes
git push origin <branch>
```

### 5. Add Summary Comment

Add a comment to the PR summarizing what was addressed:

```bash
gh pr comment <PR_NUMBER> --body "## Human Review Complete

### Items Addressed
- Item 1: [result - Approved/Fixed/Rejected]
- Item 2: [result - Approved/Fixed/Rejected]
...

**Ready for merge**: [Yes/No]

Generated by Claude Code"
```

## Example Workflow

```
User: /address-pr-reviews 27
Claude: Found PR #27 with 3 items for human review:
1. Security model decision - verify service layer placement
2. API status values - verify match with bd CLI
3. ESLint configuration - verify no conflicts

Creating todo list and starting with item 1...

[For each item, presents the issue, asks user's decision, implements if needed]

All items addressed. Pushed changes and added summary comment.
```

## Important Notes

- Always ask the user before making architectural decisions
- Don't assume what the user wants - present options
- If an item requires code changes, show what you're changing before committing
- Keep track of which items are approved vs fixed vs rejected
